{"ast":null,"code":"import AuthApi from \"@/api/auth.api.js\";\nexport default {\n  data: () => {\n    return {\n      loading: false,\n      valid: false,\n      username: \"\",\n      password: \"\",\n      snackbar: {\n        show: false,\n        message: \"\"\n      }\n    };\n  },\n  methods: {\n    vaiParaResume() {\n      this.$router.push(\"/resume\");\n    },\n\n    vaiParaCadastro() {\n      this.$router.push(\"/register\");\n    },\n\n    login() {\n      this.loading = true;\n      AuthApi.login(this.username, this.password).then(user => {\n        console.log(\"login ok\", user);\n        this.saveLoggedUser(user);\n        this.$router.push({\n          name: \"resume\"\n        });\n      }).catch(error => {\n        console.log(\"login falhou\", error);\n        this.snackbar.message = \"Usuario ou senha invalida\";\n        this.snackbar.show = true;\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n\n    saveLoggedUser(user) {\n      window.localStorage.setItem(\"x-authorization-userid\", user.id);\n      window.localStorage.setItem(\"x-authorization-usertoken\", user.token);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAqDA;AACA;EACAA;IACA;MACAC,cADA;MAEAC,YAFA;MAGAC,YAHA;MAIAC,YAJA;MAKAC;QACAC,WADA;QAEAC;MAFA;IALA;EAUA,CAZA;EAaAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;IACA,CANA;;IAOAC;MACA;MACAC,4CACAC,IADA,CACAC;QACAC;QACA;QACA;UAAAC;QAAA;MACA,CALA,EAMAC,KANA,CAMAC;QACAH;QACA;QACA;MACA,CAVA,EAWAI,OAXA,CAWA;QACA;MACA,CAbA;IAcA,CAvBA;;IAwBAC;MACAC;MACAA;IACA;;EA3BA;AAbA","names":["data","loading","valid","username","password","snackbar","show","message","methods","vaiParaResume","vaiParaCadastro","login","AuthApi","then","user","console","name","catch","error","finally","saveLoggedUser","window"],"sourceRoot":"src/views","sources":["LoginView.vue"],"sourcesContent":["<template>\n  <v-container class=\"pink lighten-4 d-flex flex-column\" fill-height>\n    <!-- snackbar -->\n    <v-snackbar v-model=\"snackbar.show\" :value=\"true\" absolute left shaped top>\n      {{ snackbar.message }}\n    </v-snackbar>\n    <v-row class=\"text-center\">\n      <v-col md=\"6\" offset-md=\"3\">\n        <v-card class=\"pa-4 rounded mt-6\" outlined tile width=\"750\">\n          <h2>Login</h2>\n          <v-form v-model=\"valid\">\n            <v-text-field\n              v-model=\"username\"\n              label=\"Usuário\"\n              required\n              outlined\n              append-icon=\"fa-user\"\n              v-on:keyup.enter=\"login\"\n            ></v-text-field>\n\n            <v-text-field\n              v-model=\"password\"\n              label=\"Senha\"\n              type=\"password\"\n              required\n              outlined\n              append-icon=\"fa-key\"\n              v-on:keyup.enter=\"login\"\n            ></v-text-field>\n\n            <v-btn\n              :loading=\"loading\"\n              :disabled=\"!valid\"\n              color=\"secondary\"\n              class=\"mr-4\"\n              x-large\n              block\n              @click=\"login\"\n              >Continuar <v-icon class=\"pl-3\">fa-arrow-right</v-icon></v-btn\n            >\n          </v-form>\n          <p class=\"ma-4\">\n            <span class=\"subtitle-1\" @click=\"vaiParaCadastro\"\n              >Não tenho conta! Fazer <a href=\"\">Cadastro</a></span\n            >\n          </p>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport AuthApi from \"@/api/auth.api.js\";\nexport default {\n  data: () => {\n    return {\n      loading: false,\n      valid: false,\n      username: \"\",\n      password: \"\",\n      snackbar: {\n        show: false,\n        message: \"\",\n      },\n    };\n  },\n  methods: {\n    vaiParaResume() {\n      this.$router.push(\"/resume\");\n    },\n    vaiParaCadastro() {\n      this.$router.push(\"/register\");\n    },\n    login() {\n      this.loading = true;\n      AuthApi.login(this.username, this.password)\n        .then((user) => {\n          console.log(\"login ok\", user);\n          this.saveLoggedUser(user);\n          this.$router.push({ name: \"resume\" });\n        })\n        .catch((error) => {\n          console.log(\"login falhou\", error);\n          this.snackbar.message = \"Usuario ou senha invalida\";\n          this.snackbar.show = true;\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    saveLoggedUser(user) {\n      window.localStorage.setItem(\"x-authorization-userid\", user.id);\n      window.localStorage.setItem(\"x-authorization-usertoken\", user.token);\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}